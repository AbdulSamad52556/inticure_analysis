{% extends 'base.html' %} {% block content %}

<!-- content @s -->
<div class="nk-content nk-content-lg nk-content-fluid">
  <!-- * SWEET ALERT * -->
  <!-- Begin alerts -->
  {% with messages = get_flashed_messages(with_categories=true) %} {% if
  messages %} {% for category, message in messages %}
  <script>
    Swal.fire({
      title: "{{ category.title() }}!",
      text: "{{ message }}",
      icon: "{{ category }}",
    });
  </script>
  {% endfor %} {% endif %} {% endwith %}
  <!-- End alerts -->

  <div class="container-xl wide-lg">
    <div class="nk-content-inner">
      <div class="nk-content-body">
        <div class="kyc-app wide-sm m-auto">
          <div class="nk-block-head-content text-center">
            <h3
              class="nk-block-title"
              style="
                font-family: 'Red Hat Display', Arial, Helvetica, sans-serif;font-size: 18px;
              "
            >
              Please Select Your Country of Residence
            </h3>
          </div>
          <div class="nk-block">
            <form action="" method="POST">
              <div class="nk-kyc-app p-sm-2">
                <div class="d-flex w-100 justify-content-center">
                  <input type="hidden" id="country-hidden" name="country" />
                  <input type="hidden" id="code-hidden" name="code" />
                  <div
                    style="
                      width: 90px;
                      height: 60px;
                      display: none;
                      justify-content: center;
                      align-items: center;
                      border: none;
                      padding: 10px;
                      color: white;
                      font-weight: bold;
                      font-size: 20px;
                      outline: none;
                      font-family: Red Hat Display;
                    "
                    class="mr-1"
                  >
                    <div id="selected-country"></div>
                  </div>
                  <div>
                    <select
                      id="country-select"
                      class="w-100 fw-normal"
                      style="
                        height: 60px;
                        outline: none;
                        padding: 10px;
                        color: white;
                        font-size: 20px;
                        color: #000;
                        font-family:Red Hat Display;
                        
                      "
                      name="country-select"
                    >
                     <option value="" disabled selected>Select your country</option>
                      <option value="India" data-code="+91">India</option>
                      <option value="United States" data-code="+1">
                        United States
                      </option>
                      <option value="Afghanistan" data-code="+93">
                        Afghanistan
                      </option>
                      <option value="Albania" data-code="+355">Albania</option>
                      <option value="Algeria" data-code="+213">Algeria</option>
                      <option value="American Samoa" data-code="+1-684">
                        American Samoa
                      </option>
                      <option value="Andorra" data-code="+376">Andorra</option>
                      <option value="Angola" data-code="+244">Angola</option>
                      <option value="Anguilla" data-code="+1-264">
                        Anguilla
                      </option>
                      <option value="Antarctica" data-code="+672">
                        Antarctica
                      </option>
                      <option value="Antigua and Barbuda" data-code="+1-268">
                        Antigua and Barbuda
                      </option>
                      <option value="Argentina" data-code="+54">
                        Argentina
                      </option>
                      <option value="Armenia" data-code="+374">Armenia</option>
                      <option value="Aruba" data-code="+297">Aruba</option>
                      <option value="Australia" data-code="+61">
                        Australia
                      </option>
                      <option value="Austria" data-code="+43">Austria</option>
                      <option value="Azerbaijan" data-code="+994">
                        Azerbaijan
                      </option>
                      <option value="Bahamas" data-code="+1-242">
                        Bahamas
                      </option>
                      <option value="Bahrain" data-code="+973">Bahrain</option>
                      <option value="Bangladesh" data-code="+880">
                        Bangladesh
                      </option>
                      <option value="Barbados" data-code="+1-246">
                        Barbados
                      </option>
                      <option value="Belarus" data-code="+375">Belarus</option>
                      <option value="Belgium" data-code="+32">Belgium</option>
                      <option value="Belize" data-code="+501">Belize</option>
                      <option value="Benin" data-code="+229">Benin</option>
                      <option value="Bermuda" data-code="+1-441">
                        Bermuda
                      </option>
                      <option value="Bhutan" data-code="+975">Bhutan</option>
                      <option value="Bolivia" data-code="+591">Bolivia</option>
                      <option value="Bosnia and Herzegovina" data-code="+387">
                        Bosnia and Herzegovina
                      </option>
                      <option value="Botswana" data-code="+267">
                        Botswana
                      </option>
                      <option value="Bouvet Island" data-code="+47">
                        Bouvet Island
                      </option>
                      <option value="Brazil" data-code="+55">Brazil</option>
                      <option
                        value="British Indian Ocean Territory"
                        data-code="+246"
                      >
                        British Indian Ocean Territory
                      </option>
                      <option value="Brunei Darussalam" data-code="+673">
                        Brunei Darussalam
                      </option>
                      <option value="Bulgaria" data-code="+359">
                        Bulgaria
                      </option>
                      <option value="Burkina Faso" data-code="+226">
                        Burkina Faso
                      </option>
                      <option value="Burundi" data-code="+257">Burundi</option>
                      <option value="Cambodia" data-code="+855">
                        Cambodia
                      </option>
                      <option value="Cameroon" data-code="+237">
                        Cameroon
                      </option>
                      <option value="Canada" data-code="+1">Canada</option>
                      <option value="Cape Verde" data-code="+238">
                        Cape Verde
                      </option>
                      <option value="Cayman Islands" data-code="+1-345">
                        Cayman Islands
                      </option>
                      <option value="Central African Republic" data-code="+236">
                        Central African Republic
                      </option>
                      <option value="Chad" data-code="+235">Chad</option>
                      <option value="Chile" data-code="+56">Chile</option>
                      <option value="China" data-code="+86">China</option>
                      <option value="Christmas Island" data-code="+61">
                        Christmas Island
                      </option>
                      <option value="Cocos (Keeling) Islands" data-code="+61">
                        Cocos (Keeling) Islands
                      </option>
                      <option value="Colombia" data-code="+57">Colombia</option>
                      <option value="Comoros" data-code="+269">Comoros</option>
                      <option value="Congo" data-code="+242">Congo</option>
                      <option
                        value="Congo, the Democratic Republic of the"
                        data-code="+243"
                      >
                        Congo, the Democratic Republic of the
                      </option>
                      <option value="Cook Islands" data-code="+682">
                        Cook Islands
                      </option>
                      <option value="Costa Rica" data-code="+506">
                        Costa Rica
                      </option>
                      <option value="Côte d'Ivoire" data-code="+225">
                        Côte d'Ivoire
                      </option>
                      <option value="Croatia" data-code="+385">Croatia</option>
                      <option value="Cuba" data-code="+53">Cuba</option>
                      <option value="Cyprus" data-code="+357">Cyprus</option>
                      <option value="Czech Republic" data-code="+420">
                        Czech Republic
                      </option>
                      <option value="Denmark" data-code="+45">Denmark</option>
                      <option value="Djibouti" data-code="+253">
                        Djibouti
                      </option>
                      <option value="Dominica" data-code="+1-767">
                        Dominica
                      </option>
                      <option value="Dominican Republic" data-code="+1-809">
                        Dominican Republic
                      </option>
                      <option value="East Timor" data-code="+670">
                        East Timor
                      </option>
                      <option value="Ecuador" data-code="+593">Ecuador</option>
                      <option value="Egypt" data-code="+20">Egypt</option>
                      <option value="El Salvador" data-code="+503">
                        El Salvador
                      </option>
                      <option value="Equatorial Guinea" data-code="+240">
                        Equatorial Guinea
                      </option>
                      <option value="Eritrea" data-code="+291">Eritrea</option>
                      <option value="Estonia" data-code="+372">Estonia</option>
                      <option value="Ethiopia" data-code="+251">
                        Ethiopia
                      </option>
                      <option
                        value="Falkland Islands (Malvinas)"
                        data-code="+500"
                      >
                        Falkland Islands (Malvinas)
                      </option>
                      <option value="Faroe Islands" data-code="+298">
                        Faroe Islands
                      </option>
                      <option value="Fiji" data-code="+679">Fiji</option>
                      <option value="Finland" data-code="+358">Finland</option>
                      <option value="France" data-code="+33">France</option>
                      <option value="France, Metropolitan" data-code="+33">
                        France, Metropolitan
                      </option>
                      <option value="French Guiana" data-code="+594">
                        French Guiana
                      </option>
                      <option value="French Polynesia" data-code="+689">
                        French Polynesia
                      </option>
                      <option
                        value="French Southern Territories"
                        data-code="+262"
                      >
                        French Southern Territories
                      </option>
                      <option value="Gabon" data-code="+241">Gabon</option>
                      <option value="Gambia" data-code="+220">Gambia</option>
                      <option value="Georgia" data-code="+995">Georgia</option>
                      <option value="Germany" data-code="+49">Germany</option>
                      <option value="Ghana" data-code="+233">Ghana</option>
                      <option value="Gibraltar" data-code="+350">
                        Gibraltar
                      </option>
                      <option value="Greece" data-code="+30">Greece</option>
                      <option value="Greenland" data-code="+299">
                        Greenland
                      </option>
                      <option value="Grenada" data-code="+1-473">
                        Grenada
                      </option>
                      <option value="Guadeloupe" data-code="+590">
                        Guadeloupe
                      </option>
                      <option value="Guam" data-code="+1-671">Guam</option>
                      <option value="Guatemala" data-code="+502">
                        Guatemala
                      </option>
                      <option value="Guinea" data-code="+224">Guinea</option>
                      <option value="Guinea-Bissau" data-code="+245">
                        Guinea-Bissau
                      </option>
                      <option value="Guyana" data-code="+592">Guyana</option>
                      <option value="Haiti" data-code="+509">Haiti</option>
                      <option
                        value="Heard and Mc Donald Islands"
                        data-code="+672"
                      >
                        Heard and Mc Donald Islands
                      </option>
                      <option
                        value="Holy See (Vatican City State)"
                        data-code="+379"
                      >
                        Holy See (Vatican City State)
                      </option>
                      <option value="Honduras" data-code="+504">
                        Honduras
                      </option>
                      <option value="Hong Kong" data-code="+852">
                        Hong Kong
                      </option>
                      <option value="Hungary" data-code="+36">Hungary</option>
                      <option value="Iceland" data-code="+354">Iceland</option>

                      <option value="Indonesia" data-code="+62">
                        Indonesia
                      </option>
                      <option value="Iran, Islamic Republic of" data-code="+98">
                        Iran, Islamic Republic of
                      </option>
                      <option value="Iraq" data-code="+964">Iraq</option>
                      <option value="Ireland" data-code="+353">Ireland</option>
                      <option value="Israel" data-code="+972">Israel</option>
                      <option value="Italy" data-code="+39">Italy</option>
                      <option value="Jamaica" data-code="+1-876">
                        Jamaica
                      </option>
                      <option value="Japan" data-code="+81">Japan</option>
                      <option value="Jordan" data-code="+962">Jordan</option>
                      <option value="Kazakhstan" data-code="+7">
                        Kazakhstan
                      </option>
                      <option value="Kenya" data-code="+254">Kenya</option>
                      <option value="Kiribati" data-code="+686">
                        Kiribati
                      </option>
                      <option
                        value="Korea, Democratic People's Republic of"
                        data-code="+850"
                      >
                        Korea, Democratic People's Republic of
                      </option>
                      <option value="Korea, Republic of" data-code="+82">
                        Korea, Republic of
                      </option>
                      <option value="Kuwait" data-code="+965">Kuwait</option>
                      <option value="Kyrgyzstan" data-code="+996">
                        Kyrgyzstan
                      </option>
                      <option
                        value="Lao People's Democratic Republic"
                        data-code="+856"
                      >
                        Lao People's Democratic Republic
                      </option>
                      <option value="Latvia" data-code="+371">Latvia</option>
                      <option value="Lebanon" data-code="+961">Lebanon</option>
                      <option value="Lesotho" data-code="+266">Lesotho</option>
                      <option value="Liberia" data-code="+231">Liberia</option>
                      <option value="Libyan Arab Jamahiriya" data-code="+218">
                        Libyan Arab Jamahiriya
                      </option>
                      <option value="Liechtenstein" data-code="+423">
                        Liechtenstein
                      </option>
                      <option value="Lithuania" data-code="+370">
                        Lithuania
                      </option>
                      <option value="Luxembourg" data-code="+352">
                        Luxembourg
                      </option>
                      <option value="Macao" data-code="+853">Macao</option>
                      <option
                        value="Macedonia, The Former Yugoslav Republic of"
                        data-code="+389"
                      >
                        Macedonia, The Former Yugoslav Republic of
                      </option>
                      <option value="Madagascar" data-code="+261">
                        Madagascar
                      </option>
                      <option value="Malawi" data-code="+265">Malawi</option>
                      <option value="Malaysia" data-code="+60">Malaysia</option>
                      <option value="Maldives" data-code="+960">
                        Maldives
                      </option>
                      <option value="Mali" data-code="+223">Mali</option>
                      <option value="Malta" data-code="+356">Malta</option>
                      <option value="Marshall Islands" data-code="+692">
                        Marshall Islands
                      </option>
                      <option value="Martinique" data-code="+596">
                        Martinique
                      </option>
                      <option value="Mauritania" data-code="+222">
                        Mauritania
                      </option>
                      <option value="Mauritius" data-code="+230">
                        Mauritius
                      </option>
                      <option value="Mayotte" data-code="+262">Mayotte</option>
                      <option value="Mexico" data-code="+52">Mexico</option>
                      <option
                        value="Micronesia, Federated States of"
                        data-code="+691"
                      >
                        Micronesia, Federated States of
                      </option>
                      <option value="Moldova, Republic of" data-code="+373">
                        Moldova, Republic of
                      </option>
                      <option value="Monaco" data-code="+377">Monaco</option>
                      <option value="Mongolia" data-code="+976">
                        Mongolia
                      </option>
                      <option value="Montserrat" data-code="+1-664">
                        Montserrat
                      </option>
                      <option value="Morocco" data-code="+212">Morocco</option>
                      <option value="Mozambique" data-code="+258">
                        Mozambique
                      </option>
                      <option value="Myanmar" data-code="+95">Myanmar</option>
                      <option value="Namibia" data-code="+264">Namibia</option>
                      <option value="Nauru" data-code="+674">Nauru</option>
                      <option value="Nepal" data-code="+977">Nepal</option>
                      <option value="Netherlands" data-code="+31">
                        Netherlands
                      </option>
                      <option value="Netherlands Antilles" data-code="+599">
                        Netherlands Antilles
                      </option>
                      <option value="New Caledonia" data-code="+687">
                        New Caledonia
                      </option>
                      <option value="New Zealand" data-code="+64">
                        New Zealand
                      </option>
                      <option value="Nicaragua" data-code="+505">
                        Nicaragua
                      </option>
                      <option value="Niger" data-code="+227">Niger</option>
                      <option value="Nigeria" data-code="+234">Nigeria</option>
                      <option value="Niue" data-code="+683">Niue</option>
                      <option value="Norfolk Island" data-code="+672">
                        Norfolk Island
                      </option>
                      <option
                        value="Northern Mariana Islands"
                        data-code="+1-670"
                      >
                        Northern Mariana Islands
                      </option>
                      <option value="Norway" data-code="+47">Norway</option>
                      <option value="Oman" data-code="+968">Oman</option>
                      <option value="Pakistan" data-code="+92">Pakistan</option>
                      <option value="Palau" data-code="+680">Palau</option>
                      <option
                        value="Palestinian Territory, Occupied"
                        data-code="+970"
                      >
                        Palestinian Territory, Occupied
                      </option>
                      <option value="Panama" data-code="+507">Panama</option>
                      <option value="Papua New Guinea" data-code="+675">
                        Papua New Guinea
                      </option>
                      <option value="Paraguay" data-code="+595">
                        Paraguay
                      </option>
                      <option value="Peru" data-code="+51">Peru</option>
                      <option value="Philippines" data-code="+63">
                        Philippines
                      </option>
                      <option value="Pitcairn" data-code="+64">Pitcairn</option>
                      <option value="Poland" data-code="+48">Poland</option>
                      <option value="Portugal" data-code="+351">
                        Portugal
                      </option>
                      <option value="Puerto Rico" data-code="+1-787">
                        Puerto Rico
                      </option>
                      <option value="Qatar" data-code="+974">Qatar</option>
                      <option value="Reunion" data-code="+262">Reunion</option>
                      <option value="Romania" data-code="+40">Romania</option>
                      <option value="Russian Federation" data-code="+7">
                        Russian Federation
                      </option>
                      <option value="Rwanda" data-code="+250">Rwanda</option>
                      <option value="Saint Helena" data-code="+290">
                        Saint Helena
                      </option>
                      <option value="Saint Kitts and Nevis" data-code="+1-869">
                        Saint Kitts and Nevis
                      </option>
                      <option value="Saint Lucia" data-code="+1-758">
                        Saint Lucia
                      </option>
                      <option
                        value="Saint Pierre and Miquelon"
                        data-code="+508"
                      >
                        Saint Pierre and Miquelon
                      </option>
                      <option
                        value="Saint Vincent and the Grenadines"
                        data-code="+1-784"
                      >
                        Saint Vincent and the Grenadines
                      </option>
                      <option value="Samoa" data-code="+685">Samoa</option>
                      <option value="San Marino" data-code="+378">
                        San Marino
                      </option>
                      <option value="Sao Tome and Principe" data-code="+239">
                        Sao Tome and Principe
                      </option>
                      <option value="Saudi Arabia" data-code="+966">
                        Saudi Arabia
                      </option>
                      <option value="Senegal" data-code="+221">Senegal</option>
                      <option value="Serbia" data-code="+381">Serbia</option>
                      <option value="Seychelles" data-code="+248">
                        Seychelles
                      </option>
                      <option value="Sierra Leone" data-code="+232">
                        Sierra Leone
                      </option>
                      <option value="Singapore" data-code="+65">
                        Singapore
                      </option>
                      <option value="Slovakia" data-code="+421">
                        Slovakia
                      </option>
                      <option value="Slovenia" data-code="+386">
                        Slovenia
                      </option>
                      <option value="Solomon Islands" data-code="+677">
                        Solomon Islands
                      </option>
                      <option value="Somalia" data-code="+252">Somalia</option>
                      <option value="South Africa" data-code="+27">
                        South Africa
                      </option>
                      <option
                        value="South Georgia and the South Sandwich Islands"
                        data-code="+500"
                      >
                        South Georgia and the South Sandwich Islands
                      </option>
                      <option value="Spain" data-code="+34">Spain</option>
                      <option value="Sri Lanka" data-code="+94">
                        Sri Lanka
                      </option>
                      <option value="Sudan" data-code="+249">Sudan</option>
                      <option value="Suriname" data-code="+597">
                        Suriname
                      </option>
                      <option
                        value="Svalbard and Jan Mayen Islands"
                        data-code="+47"
                      >
                        Svalbard and Jan Mayen Islands
                      </option>
                      <option value="Swaziland" data-code="+268">
                        Swaziland
                      </option>
                      <option value="Sweden" data-code="+46">Sweden</option>
                      <option value="Switzerland" data-code="+41">
                        Switzerland
                      </option>
                      <option value="Syrian Arab Republic" data-code="+963">
                        Syrian Arab Republic
                      </option>
                      <option value="Taiwan" data-code="+886">Taiwan</option>
                      <option value="Tajikistan" data-code="+992">
                        Tajikistan
                      </option>
                      <option
                        value="Tanzania, United Republic of"
                        data-code="+255"
                      >
                        Tanzania, United Republic of
                      </option>
                      <option value="Thailand" data-code="+66">Thailand</option>
                      <option value="Togo" data-code="+228">Togo</option>
                      <option value="Tokelau" data-code="+690">Tokelau</option>
                      <option value="Tonga" data-code="+676">Tonga</option>
                      <option value="Trinidad and Tobago" data-code="+1-868">
                        Trinidad and Tobago
                      </option>
                      <option value="Tunisia" data-code="+216">Tunisia</option>
                      <option value="Turkey" data-code="+90">Turkey</option>
                      <option value="Turkmenistan" data-code="+993">
                        Turkmenistan
                      </option>
                      <option
                        value="Turks and Caicos Islands"
                        data-code="+1-649"
                      >
                        Turks and Caicos Islands
                      </option>
                      <option value="Tuvalu" data-code="+688">Tuvalu</option>
                      <option value="Uganda" data-code="+256">Uganda</option>
                      <option value="Ukraine" data-code="+380">Ukraine</option>
                      <option value="United Arab Emirates" data-code="+971">
                        United Arab Emirates
                      </option>
                      <option value="United Kingdom" data-code="+44">
                        United Kingdom
                      </option>
                      <option value="Uruguay" data-code="+598">Uruguay</option>
                      <option value="Uzbekistan" data-code="+998">
                        Uzbekistan
                      </option>
                      <option value="Vanuatu" data-code="+678">Vanuatu</option>
                      <option value="Venezuela" data-code="+58">
                        Venezuela
                      </option>
                      <option value="Viet Nam" data-code="+84">Viet Nam</option>
                      <option
                        value="Virgin Islands (British)"
                        data-code="+1-284"
                      >
                        Virgin Islands (British)
                      </option>
                      <option value="Virgin Islands (U.S.)" data-code="+1-340">
                        Virgin Islands (U.S.)
                      </option>
                      <option
                        value="Wallis and Futuna Islands"
                        data-code="+681"
                      >
                        Wallis and Futuna Islands
                      </option>
                      <option value="Western Sahara" data-code="+212">
                        Western Sahara
                      </option>
                      <option value="Yemen" data-code="+967">Yemen</option>
                      <option value="Zambia" data-code="+260">Zambia</option>
                      <option value="Zimbabwe" data-code="+263">
                        Zimbabwe
                      </option>
                    </select>
                  </div>
                </div>

                <!-- Modal -->
                <div
                  class="modal fade"
                  id="locationModal"
                  tabindex="-1"
                  role="dialog"
                  aria-labelledby="modalLabel"
                  aria-hidden="true"
                >
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title text-white" id="modalLabel">
                          Location Mismatch
                        </h5>
                        <button
                          type="button"
                          class="close"
                          data-dismiss="modal"
                          aria-label="Close"
                        >
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body text-center">
                        <div class="warning-icon">⚠️</div>
                        <p id="modal-message">Your message will appear here.</p>
                      </div>
                      <div class="modal-footer">
                        <button
                          type="button"
                          class="btn btn-primary"
                          data-dismiss="modal"
                        >
                          OK
                        </button>
                        {#<button
                          type="button"
                          id="confirm-selection"
                          class="btn btn-primary"
                        >
                          Continue
                        </button>#}
                      </div>
                    </div>
                  </div>
                </div>

                <div class="nk-kyc-app-action text-center mt-5">
                  <button
                    type="submit"
                    id = "submit_residence"
                    class="btn btn-lg btn-round"
                    style="background-color: #6a1b78; color: white"
                    disabled
                  >
                    Continue
                  </button>
                </div>
              </div>
            </form>
          </div>
          <!-- .nk-block -->
        </div>
        <!-- .kyc-app -->
      </div>
    </div>
  </div>
</div>
<!-- content @e -->
<script>
  const countrySelect = document.getElementById("country-select");
  const selectedCountryDisplay = document.getElementById("selected-country");
  const countryHiddenField = document.getElementById("country-hidden");
  const codeHiddenField = document.getElementById("code-hidden");
  let firstSelectedCountry = ""
  // Declare a variable to store the number of selections
  let selectionCount = 0;

  function updateCountryCode() {
    const selectedOption = countrySelect.options[countrySelect.selectedIndex];
    const countryCode = selectedOption.getAttribute("data-code");
    const countryName = selectedOption.value;

    selectedCountryDisplay.textContent = countryCode;
    countryHiddenField.value = countryName;
    codeHiddenField.value = countryCode;

    // Increment the count on each selection
    console.log(`Country selected: ${countryName}, Selection Count: ${selectionCount}`);

    // Check user location only if a valid country is selected
    if (countryName) {

      checkUserLocation(countryName);
    }
  }

  function checkUserLocation(selectedCountry) {
    // Fetch location data from ip-api or your server
    fetch("/get-user-country")
      .then((response) => response.json())
      .then((data) => {
        const userCountry = data.country;

        if (userCountry !== selectedCountry) {
          const modalMessage = `You have selected ${selectedCountry}, But it seems like you are not in ${selectedCountry}. Please select the right country of residence.`;
          document.getElementById("modal-message").innerText = modalMessage;
          selectionCount++;
          console.log(selectionCount, userCountry)
          if (selectionCount < 2 || selectedCountry != firstSelectedCountry){

          countrySelect.value = ""; // Resets the dropdown to the default option
          selectedCountryDisplay.textContent = ""; // Clear the displayed country code
          countryHiddenField.value = ""; // Clear the hidden field
          codeHiddenField.value = ""; // Clear the code hidden field
          $("#locationModal").modal("show");
            console.log(firstSelectedCountry)
          firstSelectedCountry = selectedCountry
            console.log(firstSelectedCountry)
          document.getElementById('submit_residence').disabled = true
          
          }
          else if (selectionCount >= 2 && firstSelectedCountry == selectedCountry){
            console.log('inijehioe')
          document.getElementById('submit_residence').disabled = false
          }
          else{
          firstSelectedCountry = selectedCountry
          print(firstSelectedCountry)
            console.log('aksdfalsdikjf')
          document.getElementById('submit_residence').disabled = true

          }
          // Show the modal

          // Add event listener for the confirm button
          document.getElementById("confirm-selection").onclick = function () {
            // Proceed with the selected country
            $("#locationModal").modal("hide");
          };

          // Remove the selected option from the dropdown (reset to default)
          
        }else{
          document.getElementById('submit_residence').disabled = false
        }
      })
      .catch((error) => console.error("Error getting user location:", error));
  }

  // Update the displayed country code and hidden field when the selection changes
  countrySelect.addEventListener("change", updateCountryCode);
</script>


<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>
<script src="//cdn.tutorialjinni.com/jquery/3.6.1/jquery.min.js"></script>

<style>
  /* Custom modal styles */
  .modal-content {
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  }
  .modal-header {
    background-color: #6a1b78; /* Your primary color */
    color: white;
  }
  .modal-title {
    font-weight: bold;
  }
  .modal-body {
    font-size: 16px;
  }
  .modal-footer .btn {
    border-radius: 8px;
    padding: 10px 20px;
  }
  .modal-footer .btn-primary {
    background-color: #9c27b0; /* Lighter shade for primary button */
    border: none;
  }
  .modal-footer .btn-secondary {
    background-color: #f44336; /* Red for cancel button */
    border: none;
  }
  /* Add hover effects */
  .modal-footer .btn-primary:hover {
    background-color: #8e24aa; /* Darker shade on hover */
  }
  .modal-footer .btn-secondary:hover {
    background-color: #d32f2f; /* Darker shade on hover */
  }
  .modal-body p {
    margin-bottom: 0;
  }
  .warning-icon {
    font-size: 50px;
    color: #f9c74f; /* Yellow color for warning icon */
    display: block;
    text-align: center;
    margin-bottom: 20px;
  }
</style>
{% endblock %}
